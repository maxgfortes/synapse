<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spster</title>

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>  
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      height: 100vh;
      background-size: cover;
      font-family: Arial, sans-serif;
      background-color: #ffffff ;
      color: #fff;
      overflow-x: hidden;
      position: relative;
    } 

    /* Navbar Topo */
    .navbar-top {
      background: #D0D0D0;
      background: linear-gradient(0deg, #b3b3b3 0%, rgba(229, 229, 229, 1) 100%);
      border-bottom: 1px solid #919191;
      display: flex;
      align-items: center;
      padding: 0 20px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      height: 50px;
    }

    .logo {
      font-weight: bold;
      font-size: 30px;
      color: #707070;
    }

    .logo-area{
    border-right: 1px solid #919191;
    height: 100%;
    padding: 0 0 0 40px;
    width: 200px;
    justify-content: center;
    align-content: center;
    }

    .search {
    height: 100%;
    padding: 0 20px;
    align-content: center;
    justify-content: center;
    }

    .search-box {
    background: white;
    display: flex;
    align-items: center;
    border-radius: 4px;
    border: 1px solid #888888;
    box-shadow: inset 0 8px 8px -7px rgba(0,0,0,0.3);
}

.search-box input {
    border: none;
    outline: none;
    background: none;
    padding-top: 3px;
    padding-bottom: 2px;
    padding-left: 3px;
    width: 250px;
    font-size: 16px;
}

.search-box button {
    border: none;
    cursor: pointer;
    background-color: #00000000;
    padding-left: 3px;
}

.search-box i {
    color: #707070;
    font-size: 14px;
}


.player {
    background-color: #f1f1f1;
    height: 100%;
    align-content: center;
    justify-content: center;
    border-right: 1px solid #919191;
    border-left: 1px solid #919191;
    padding-left: 40px;
    padding-right: 40px;
}

.player-row {
    display: flex;
    align-content: center;
    justify-content: center;
    gap: 20px;
}

.controls {
    display: flex;
    gap: 15px;
}

.controls button {
    border: none;
    color: #6d6d6d;
    cursor: pointer;
    font-size: 16px;
    background-color: #00000000;
}

.volume {
    flex: 1;
}

.volume input[type="range"] {
    width: 100%;
    appearance: none;
    background: #707070;
    height: 5px;
    border-radius: 5px;
    outline: none;
}

.volume input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: #f2f2f2;
    box-shadow: 0 0 6px rgba(0, 0, 0, 0.6);
    border: 1px solid #707070;
    cursor: pointer;
    border: none;
}

.icon-button {
    border: 1px solid ;
    color: #858585;
    background: #D9DAD9;
    background: linear-gradient(0deg, rgb(192, 192, 192) 0%, rgba(248, 248, 248, 1) 100%);
    padding: 12px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: auto;
    padding: 5px 12px 5px 12px;
}


    .nav-links {
      display: flex;
      gap: 20px;
    }

    .nav-links a {
      color: #fff;
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 8px;
      transition: background 0.3s;
    }

    .nav-links a:hover {
      background-color: #111;
    }

    /* Sidebar Desktop */
    .sidebar {
      position: fixed;
      top: 70px;
      left: 0;
      width: 220px;
      height: calc(100% - 70px);
      background-color: #b3b3b300;
      border: 1px solid #919191;
      padding-top: 20px;
      border-radius: 4px;
      margin-left: 10px;
      margin-bottom: 40px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .sidebar a {
      color: #575757;
      text-decoration: none;
      padding: 15px 25px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 18px;
      margin-top: 10px;
    }

    .sidebar a:hover {
      background-color: #d9d9d9;
    }

    /* Main Content */
    .main-content {
      margin-left: 220px;
      padding: 90px 20px 60px 20px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .post {
      background-color: #11111100;
      border: 1px solid #919191;
      border-radius: 10px;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      min-height: 200px;
      color: #575757;
    }

    .post .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .post .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .post .user-info img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }

    .post .username {
      font-weight: bold;
      font-size: 14px;
    }

    .post .content {
      margin: 10px 0;
      text-align: center;
    }

    .post .content img {
      max-width: 100%;
      border-radius: 8px;
    }

    .post .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid #919191;
      padding-top: 8px;
    }

    .post .actions {
      display: flex;
      gap: 10px;
    }

    .post .actions button {
      background: none;
      border: none;
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    .post .actions button:hover {
      color: #7c7c7c;
    }

    /* Navbar Inferior Mobile */
    .bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background-color: #000;
      border-top: 1px solid #333;
      justify-content: space-around;
      padding: 10px 0;
      z-index: 1000;
    }

    .bottom-nav a {
      color: #fff;
      text-decoration: none;
      font-size: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .bottom-nav a:hover {
      color: #585858;
    }

    /* Responsivo */
    @media (max-width: 1024px) {
      .sidebar {
        display: none;
      }
      .main-content {
        margin-left: 0;
      }
    }

    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .bottom-nav {
        display: flex;
      }
    }

    .main {
        height: 100vh;
        width: 100vw;
        display: flex;
        flex-direction: column;
        padding-top: 50px;
    }
    
    .top-controlers {
        width: 100%;
        position: relative;
    }

    .controlers {
        display: flex;
        justify-content: center;
        align-content: center;
        padding: 4px 0;
        background-color: #e9e9e9;
    }
    
    .add-music {
        display: none;
        position: fixed;
        border-radius: 14px;
        background-color: #85858560;
        backdrop-filter: blur(8px);
        border: 1px solid #c9c9c9;
        height: 160px;
        width: 500px;
        left: 32%;
        margin-top: 8px;
        padding: 20px;
        transform: scale(0.7);
        opacity: 0;
        transition: all 0.3s ease;
    }

    .add-music.ativo {
        display: block;
        transform: scale(1);
        opacity: 1;
    }

    .add-msc-container {
        height: 100%;
        display: flex;
        flex-direction: column;
    }
    
    .add-msc-area {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }

    .link-area {
        background-color: rgba(88, 88, 88, 0.267);
        border: 1px solid #b4b4b4;
        backdrop-filter: blur(8px);
        height: 50px;
        border-radius: 10px;
        justify-content: center;
        align-content: center;
    }

    .link-input {
        height: 50px;
        border-radius: 10px;
        border: none;
        padding: 0 20px;
        width: 100%;
        justify-content: center;
        align-content: center;
        background-color: transparent;
        color: #eee;
        font-size: 16px;
    }

    .link-input::placeholder {
        color: #ccc;
        font-weight: 100;
        font-size: 16px;
    }

    .link-input:focus {
        outline: none;
    }

    .add-btn-area {
        display: flex;
        justify-content: flex-end;
    }

    .add-msc-btn {
        background-color: #105bfd;
        padding: 10px 20px;
        border: none;
        color: #fff;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
    }

    .add-msc-btn:hover {
        background-color: #0d4dd6;
    }

    .add-music::after {
        content: "";
        position: absolute;
        top: -14px;
        left: 59%;
        transform: translateX(-50%);
        width: 24px;
        height: 12px;
        background: rgb(214, 214, 214);
        border: 1px solid rgb(201,201,201);
        border-bottom: none;
        border-radius: 100px 100px 0 0;
        backdrop-filter: blur(8px);
        clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
    }

    .control-btn {
        background-color: transparent;
        border: none;
        padding: 8px 20px;
        font-size: 14px;
        color: #444;
        border-radius: 4px;
        cursor: pointer;
    }

    .active {
        color: #fff;
        background-color: #105bfd;
    }

    .main-sections {
        border-top: 1px solid #cccccc;
        height: 100%;
        width: 100%;
        display: flex;
    }

    .side-bar {
        width: 250px;
        height: 100%;
        border-right: 1px solid #ccc;
    }

    .side-section {
        padding-bottom: 10px;
    }

    .side-title {
        font-size: 13px;
        font-weight: bold;
        color: #555;
        padding: 4px 12px;
    }

    .side-btn {
        background-color: transparent;
        border: none;
        padding: 8px 20px;
        font-size: 14px;
        color: #444;
        cursor: pointer;
        width: 100%;
        text-align: left;
    }

    .side-btn:hover {
        background-color: #f0f0f0;
    }

    .side-btn i {
        padding-right: 6px;
    }

    .content-area {
        width: 100%;
        height: 100%;
        display: flex;
        overflow-y: auto;
    }

    .content-list {
        width: 100%;
    }

    .content-list.playing {
        background-color: #f0f0f0;
        width: 40px;
    }

    .content-title.playing {
        border-right: none;
        height: 23px;
    }

    .content-list.listened {
        width: 120px;
    }

    .content-title.listened {
        border-right: none;
    }

    .content-list.liked {
        width: 120px;
    }

    .content-list.name {
        width: 200%;
    }

    .content-title {
        font-size: 12px;
        font-weight: bold;
        color: #555;
        padding: 4px 12px;
        border-bottom: 1px solid #ccc;
        border-right: 1px solid #ccc;
    }

    .content-title:last-child {
        border-right: none;
    }

    .music-item {
        display: flex;
        border-bottom: 1px solid #e0e0e0;
        cursor: pointer;
        transition: background-color 0.2s;
    }

    .music-item:hover {
        background-color: #f5f5f5;
    }

    .music-item.playing {
        background-color: #e3f2fd;
    }

    .music-cell {
        padding: 12px;
        font-size: 13px;
        color: #555;
        display: flex;
        align-items: center;
    }


    .music-cell.name {
        width: 100%;
    }

    .music-cell i {
        color: #105bfd;
    }

    .player-container {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        height: 0;
        overflow: hidden;
        z-index: -1;
    }
  </style>
  
</head>
<body>

<!-- Navbar topo -->
<nav class="navbar-top">
    <div class="logo-area">
        <div class="logo">Spster</div>
    </div>
    <div class="search">
        <div class="search-area">
        <div class="search-box">
        <button><i class="fas fa-search"></i></button>
        <input type="text" placeholder="Buscar">
    </div>
    </div>
    </div>
    <div class="player">
        <div class="player-row">
        <div class="controls">
            <button><i class="fas fa-backward"></i></button>
            <button class="play"><i class="fas fa-play"></i></button>
            <button><i class="fas fa-forward"></i></button>
        </div>
        <div class="volume">
            <input type="range" min="0" max="100" value="50">
        </div>
    </div>
</div>

<button class="icon-button">
  <i class="fa-solid fa-bars"></i>
</button>
</nav>

<div class="main">
    <div class="top-controlers">
        <div class="controlers-pad"></div>
        <div class="controlers">
            <button class="control-btn active">Biblioteca</button>
            <button class="control-btn" id="abrirInput">Adicionar Músicas</button>
        </div>
        <div class="add-music" id="addModal">
            <div class="add-msc-container">
                <div class="add-msc-area">
                    <div class="link-area">
                        <input class="link-input" placeholder="Cole aqui a url do youtube...">
                    </div>
                    <div class="add-btn-area">
                        <button class="add-msc-btn">Adicionar Música</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="main-sections">
        <div class="side-bar">
            <div class="side-section">
                <div class="side-title">Biblioteca</div>
                <div class="side-options">
                    <button class="side-btn"><i class="fa-solid fa-calendar"></i> Adições Recentes</button>
                    <button class="side-btn"><i class="fa-solid fa-music"></i> Musicas</button>
                </div>
            </div>
            <div class="side-section">
                <div class="side-title">Playlists de Música</div>
                <div class="side-options">
                    <button class="side-btn"><i class="fa-solid fa-arrow-up-right-dots"></i> Mais Ouvidas</button>
                    <button class="side-btn"><i class="fa-solid fa-heart"></i> Favoritas</button>
                </div>
            </div>
        </div>
        <div class="content-area">
            <div class="content-list playing">
                <div class="content-title playing"></div>
                <div class="content-items" id="playingColumn">
                </div>
            </div>
            <div class="content-list name">
                <div class="content-title name">Nome</div>
                <div class="content-items" id="nameColumn">
                </div>
            </div>
            <div class="content-list">
                <div class="content-title">Duração</div>
                <div class="content-items" id="durationColumn">
                </div>
            </div>
            <div class="content-list">
                <div class="content-title">Artista</div>
                <div class="content-items" id="artistColumn">
                </div>
            </div>
            <div class="content-list">
                <div class="content-title">Genero</div>
                <div class="content-items" id="genreColumn">
                </div>
            </div>
            <div class="content-list liked">
                <div class="content-title liked">Curtido</div>
                <div class="content-items" id="likedColumn">
                </div>
            </div>
            <div class="content-list listened">
                <div class="content-title listened">Escutado</div>
                <div class="content-items" id="listenedColumn">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Player invisível para tocar as músicas -->
<div class="player-container">
    <iframe id="youtubePlayer" width="0" height="0" frameborder="0" allow="autoplay"></iframe>
</div>

</body>
<script>
const modal = document.getElementById("addModal");
const botao = document.getElementById("abrirInput");
const linkInput = document.querySelector(".link-input");
const addBtn = document.querySelector(".add-msc-btn");
const youtubePlayer = document.getElementById("youtubePlayer");

let musicas = JSON.parse(localStorage.getItem('musicas')) || [];
let currentPlaying = null;

// Função para extrair ID do YouTube
function extractYouTubeID(url) {
    const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
    const match = url.match(regExp);
    return (match && match[7].length == 11) ? match[7] : null;
}

// Função para buscar informações do vídeo (usando oEmbed API do YouTube)
async function getVideoInfo(videoId) {
    try {
        const response = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`);
        const data = await response.json();
        return {
            title: data.title,
            author: data.author_name
        };
    } catch (error) {
        return {
            title: 'Música sem título',
            author: 'Artista desconhecido'
        };
    }
}

// Adicionar música
addBtn.onclick = async function() {
    const url = linkInput.value.trim();
    
    if (!url) {
        alert('Cole uma URL do YouTube!');
        return;
    }
    
    const videoId = extractYouTubeID(url);
    
    if (!videoId) {
        alert('URL inválida do YouTube!');
        return;
    }
    
    // Buscar informações do vídeo
    const videoInfo = await getVideoInfo(videoId);
    
    const novaMusica = {
        id: Date.now(),
        videoId: videoId,
        url: url,
        title: videoInfo.title,
        artist: videoInfo.author,
        duration: '--:--',
        genre: 'Não definido',
        liked: false,
        listened: false
    };
    
    musicas.push(novaMusica);
    localStorage.setItem('musicas', JSON.stringify(musicas));
    
    renderMusicas();
    linkInput.value = '';
    fecharModal();
};

// Renderizar lista de músicas
function renderMusicas() {
    const playingCol = document.getElementById('playingColumn');
    const nameCol = document.getElementById('nameColumn');
    const durationCol = document.getElementById('durationColumn');
    const artistCol = document.getElementById('artistColumn');
    const genreCol = document.getElementById('genreColumn');
    const likedCol = document.getElementById('likedColumn');
    const listenedCol = document.getElementById('listenedColumn');
    
    // Limpar colunas
    playingCol.innerHTML = '';
    nameCol.innerHTML = '';
    durationCol.innerHTML = '';
    artistCol.innerHTML = '';
    genreCol.innerHTML = '';
    likedCol.innerHTML = '';
    listenedCol.innerHTML = '';
    
    musicas.forEach((musica, index) => {
        const isPlaying = currentPlaying === index;
        
        // Coluna Playing (ícone)
        const playingCell = document.createElement('div');
        playingCell.className = `music-cell playing ${isPlaying ? 'playing' : ''}`;
        playingCell.innerHTML = isPlaying ? '<i class="fas fa-play"></i>' : '';
        playingCell.onclick = () => playMusic(index);
        playingCol.appendChild(playingCell);
        
        // Coluna Nome
        const nameCell = document.createElement('div');
        nameCell.className = `music-cell name ${isPlaying ? 'playing' : ''}`;
        nameCell.textContent = musica.title;
        nameCell.onclick = () => playMusic(index);
        nameCol.appendChild(nameCell);
        
        // Coluna Duração
        const durationCell = document.createElement('div');
        durationCell.className = 'music-cell';
        durationCell.textContent = musica.duration;
        durationCell.onclick = () => playMusic(index);
        durationCol.appendChild(durationCell);
        
        // Coluna Artista
        const artistCell = document.createElement('div');
        artistCell.className = 'music-cell';
        artistCell.textContent = musica.artist;
        artistCell.onclick = () => playMusic(index);
        artistCol.appendChild(artistCell);
        
        // Coluna Gênero
        const genreCell = document.createElement('div');
        genreCell.className = 'music-cell';
        genreCell.textContent = musica.genre;
        genreCell.onclick = () => playMusic(index);
        genreCol.appendChild(genreCell);
        
        // Coluna Curtido
        const likedCell = document.createElement('div');
        likedCell.className = 'music-cell';
        likedCell.innerHTML = musica.liked ? '<i class="fas fa-heart" style="color: #f44336;"></i>' : '';
        likedCol.appendChild(likedCell);
        
        // Coluna Escutado
        const listenedCell = document.createElement('div');
        listenedCell.className = 'music-cell';
        listenedCell.innerHTML = musica.listened ? '<i class="fas fa-check" style="color: #4caf50;"></i>' : '';
        listenedCol.appendChild(listenedCell);
    });
}

// Tocar música
function playMusic(index) {
    const musica = musicas[index];
    currentPlaying = index;
    
    // Marcar como escutada
    musicas[index].listened = true;
    localStorage.setItem('musicas', JSON.stringify(musicas));
    
    // Carregar vídeo no iframe
    youtubePlayer.src = `https://www.youtube.com/embed/${musica.videoId}?autoplay=1&enablejsapi=1`;
    
    renderMusicas();
}

// Modal - Alterna entre abrir e fechar
botao.onclick = function() {
  if (modal.classList.contains("ativo")) {
    fecharModal();
  } else {
    modal.style.display = "block";
    setTimeout(() => {
      modal.classList.add("ativo");
    }, 10);
  }
}

// Fecha o modal
function fecharModal() {
  modal.classList.remove("ativo");
  setTimeout(() => {
    modal.style.display = "none";
  }, 300);
}

// Fecha clicando fora do modal
window.onclick = function(event) {
  if (event.target == modal) {
    fecharModal();
  }
}

// Carregar músicas ao iniciar
renderMusicas();
</script>
</html>